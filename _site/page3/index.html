<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      JuliaKM &middot; A collection of odd things
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>A collection of odd things. You can also find me <a href="https://www.facebook.com/JuliaKM">other</a> <a href="http://www.linkedin.com/in/juliakm/">places</a>.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about/">About</a>
        
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    

    <!--<a class="sidebar-nav-item" href="/archive/v1.0.0.zip">Download</a>
    <a class="sidebar-nav-item" href="">GitHub project</a>-->
    <span class="sidebar-nav-item">Currently v1.0.0</span>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2014. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">JuliaKM</a>
            <small>A collection of odd things</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2008/09/03/drupal-talk-tomorrow/">
        Drupal Talk Tomorrow
      </a>
    </h1>

    <span class="post-date">03 Sep 2008</span>

    <p>I&#39;ll be giving a very brief overview of Drupal tomorrow at our </p>

<p><a href="http://drupal.meetup.com/19/">first Drupal meetup</a> in Durham. Here&#39;s my presentation:</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2008/04/01/adding-author-name-drupal-search-index/">
        Adding author name to the Drupal search index
      </a>
    </h1>

    <span class="post-date">01 Apr 2008</span>

    <p>Awhile back, I wanted to add author names to the Drupal search index. After poking around a bit, I found that this was actually pretty easy. I created a new module called custom_helper and in it put the following function: </p>

<p><code>
&lt;?php
//Adding author name to the search index
function custom_helper_nodeapi($node, $op, $arg = 0) {
  switch ($op) {
    case &#39;update index&#39;:
      if ($node-&gt;uid) {
        $user = user_load(array(&#39;uid&#39; =&gt; $node-&gt;uid));
        return $user-&gt;name;
      }
  }
?&gt;
</code> One thing to keep in mind is that if you do this, then you will need to re-index all of your previously indexed nodes if you wanted them to be indexed by author name.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2008/02/03/displaying-nodeprofile-fields-user-within-node/">
        Displaying Nodeprofile Fields for a User within a Node
      </a>
    </h1>

    <span class="post-date">03 Feb 2008</span>

    <p>I was banging my head against the wall this weekend trying to remember how to display nodeprofile fields with user information. It&#39;s actually really easy and I thought I should write a post about how to do it for the next time I forget. In this case, I have a content type called &#39;myuserprofile&#39; that is selected as the content type to use for nodeprofiles. In my myuserprofile content type, I have a field for users to enter their favorite food. There are two easy ways of displaying this information. First, we can grab and display it within a node. For example, say that I want to display a user&#39;s favorite food on a page if that user is logged in. To do so, the following would work: </p>

<p><code>&lt;?php
global $user;
//checking if a user is logged in
if ($user-&gt;uid):
//load the nodeprofile user profile for the currently logged-in user
$profile = node_load(array(&#39;type&#39;=&gt;&#39;myuserprofile&#39;, &#39;uid&#39;=&gt;$user-&gt;uid));
//print out the user&#39;s favorite food
print $profile-&gt;field_favorite_food[0][&#39;value&#39;];
?&gt;
</code> A second approach to displaying this information, is to put the following in the _phptemplate_variables function of template.php. </p>

<p>`
&lt;?php 
function <em>phptemplate</em>variables($hook, $vars = array()) {
switch ($hook) {
    case &#39;node&#39;:
      //checking if a user is logged in
    if ($user-&gt;uid):</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">    $vars[&#39;profile&#39;] = node_load(array(&#39;type&#39;=&gt;&#39;myuserprofile&#39;, &#39;uid&#39;=&gt;$user-&gt;uid));
    $vars[&#39;favorite_food&#39;] = $vars[&#39;profile&#39;]-&gt;field_favorite_food[0][&#39;value&#39;];
endif;
break;
}
return $vars;
</code></pre></div>
<p>}
?&gt;
` Then, I can display the favorite food information on a page with: </p>

<p>`
&lt;?php 
global $user;
print $favorite_food;
?&gt;</p>

<p>`</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2008/01/12/drupal-permissions-issues-debugging-checklist/">
        Drupal Permissions Issues: A Debugging Checklist
      </a>
    </h1>

    <span class="post-date">12 Jan 2008</span>

    <p>Every once in awhile, when working on a Drupal site, my content either disappears or I cannot log-in. At this point, I usually get rather angry and start thinking of worse case scenarios. What if I can never log into my site again? What if anonymous users can&#39;t read articles? In a rare moment of clarity, I put together the following Drupal permissions debugging checklist. I hope that you find it as useful as I have. </p>

<p><strong>1. Check user access control and make sure that all users can &quot;access content&quot;</strong> <em>Path:</em> mysite.com/admin/user/access Often, when installing a module, I accidentally change key permissions. For example, a couple of times I have allowed anonymous users to &quot;access content&quot; but not logged-in ones. Although my access control permissions are usually not the problem, its always best to check them before moving onto the next approaches. </p>

<p><strong>2. Check input filter roles</strong> <em>Path:</em> mysite.com/admin/settings/filters One problem with having a lot of input filters is that you can easily mess up the permissions of a particular filter. If a user does not have permission to use an input filter, then they cannot edit content that can only be edited with that input filter. To give a real-world example, say that I set up a new input filter called &quot;tinyMCE.&quot; Next, I set up my permissions for tinyMCE so that only my webmaster role can use the tinyMCE input filter. While doing this, I also set permissions so that only the webmaster can use my &quot;Filtered HTML&quot; and &quot;Full HTML&quot; input filters. Next, I set up a new role called &quot;intern&quot; and let the intern edit content. However, my intern reports that he cannot access any of the edit pages. Why? He needs to have access to the &quot;tinyMCE&quot; input filter. </p>

<p><strong>3. Clear site cache and views cache</strong> <em>Path for Views Cache:</em> mysite.com/admin/build/views/tools Sometimes site cache and views cache can result in strange permissions problem. Site cache can be reset with the Developer module &quot;Empty cache&quot; menu option. To have this appear, you need to enable the Devel block. In addition to clearing the site cache, sometimes it helps to clear the ciews cache. This is especially true if your permissions problems started after you edited a view. The option to clear views cache can be found in the Tools section of the ciews administration page. </p>

<p><strong>4. If all else fails, rebuild node permissions</strong> <em>Path:</em> mysite.com/admin/content/node-settings/rebuild Sometimes Drupal node permissions get corrupted. When this happens, rebuilding the node permissions can solve the problem. Please be advised that if you have a lot of nodes, this can take a very long time. </p>

<p><strong>5. The Last Step: Looking for Module-Specific Issues</strong> <em>Path for Update Script:</em> mysite.com/update.php If none of the previous steps work, I usually try to figure out if the problem is caused by a module that I just installed. First, if I recently installed a new version of a module, I make sure that I have run the update.php script. Next, I generally disable the module, and then repeat step three. </p>

<p><strong>6. The Bonus Step: Backtrace</strong> <em>Backtrace Module:</em> http://drupal.org/project/trace Sebastien Hinderer wrote in to suggest using PHP&#39;s backtrace function as an additional debugging tool. You can use the <a href="http://drupal.org/project/trace">Trace module</a> and/or the <a href="http://php.net/manual/en/function.debug-print-backtrace.php">debug_print_backtrace() PHP function</a>. Using backtrace, you can identify which Drupal function triggered an &quot;Access Denied&quot; message and save lots of debugging time. Please let me know if there are other ways of hunting down and fixing permissions issues that you know about.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2008/01/06/drupal-theming-create-subpage-template-applies-multiple-pages-newspaper-site/">
        Drupal Theming: Create a Subpage Template that Applies to Multiple Pages on a Newspaper Site
      </a>
    </h1>

    <span class="post-date">06 Jan 2008</span>

    <p>While working on a new Drupal site, I needed to set the same &quot;subsection&quot; template for multiple pages. The site is for an online newspaper and I wanted to use a new template for each of the section homepages. A good example of a similar approach is on CNN.com, where the <a href="http://www.cnn.com/US/">US section page</a> looks different than both the <a href="http://www.cnn.com/">homepage</a> and the <a href="http://www.cnn.com/2008/US/weather/01/06/california.storm.ap/index.html">article pages</a>. In past projects, I&#39;ve confused myself with template names. Six months later, I have trouble remembering what page-node-1432.tpl.php actually controls. So, this time, I set out to have better named template files and to have the same template file control multiple pages. So far, this has made it easier for both the project graphic designer and I. Here&#39;s the code that I put in my template.php file to make page-subsection.tpl.php the template file for node/17658, node/17638, and node/17628. `
&lt;?php</p>

<p>function <em>phptemplate</em>variables($hook, $vars = array()) {
 switch ($hook) {
    case &#39;page&#39;:
      if((arg(0)==’node’) &amp;&amp; ((arg(1) == ‘17658’) || (arg(1) == ‘17638’) || (arg(1) == ‘17628’))){ 
        $vars‘template_files’ = ‘page-subsection’; 
        }
    }
      return $vars;
}
?&gt;
` This code is effectively saying, if the page you are on has the node id 17658, 17638, or 17628, use the page template page-subsection.tpl.php.</p>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page4">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page2">Newer</a>
    
  
</div>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
